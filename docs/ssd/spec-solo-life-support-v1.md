# Spec: 一人暮らし支援アプリ（節約・家計管理）v1

## 変更前整理（目的 / 影響範囲 / 検証方法）
- 目的: 一人暮らしで節約重視のユーザー向けに、家計管理と買い物計画を一体化したMVP要件を定義する。
- 影響範囲: 要件定義ドキュメントのみ（実装コードへの影響なし）。
- 検証方法: Markdown文書として構成が崩れていないこと、および要件の整合性を目視確認する。

## 背景
- 一人暮らしでは、日々の支出入力が続かないことや、買い物計画不足による無駄買いが家計悪化の要因になりやすい。
- ユーザーの優先課題は「家計管理」であり、行動に直結する機能として「買い物リスト自動生成」が求められている。

## 目的
- 節約重視ユーザーが、
  1) 支出を簡単に記録し、
  2) 計画的に買い物し、
  3) 月次で改善点を把握できる
  体験を提供する。

## 対象ユーザー
- メインターゲット: 節約重視の一人暮らしユーザー
- ユーザー特性:
  - 支出管理はしたいが、入力負荷が高いと継続しづらい
  - 買い物前に必要品を整理したい
  - 月末に「何に使いすぎたか」を把握したい

## プラットフォーム方針
- 初期リリース: Webアプリを優先して提供する。
- 将来展開: Webでの利用実績と要件検証後に、Android / iOSアプリへ段階的に展開する。

## スコープ
- In Scope:
  - 家計管理（収入・支出・残高の記録と可視化）
  - 予算管理（締め日設定、総額予算、カテゴリ別予算）
  - 月次レポート（カテゴリ別集計、予算比、前月比）
  - 買い物リスト自動生成（購入履歴をもとにAIで在庫切れを推定し、予算残・定期購入候補とあわせて提案）
- Out of Scope:
  - 銀行口座・クレカ明細の自動連携
  - 複数ユーザーの家計共有
  - 高度な資産運用分析

## 機能要件
1. 家計入力
   - ユーザーは1件単位で収入・支出を記録できる。
   - 支出入力は手入力に加え、レシートOCRによる自動入力を利用できる。
   - カテゴリは最低限（食費 / 日用品 / 交通 / 光熱費 / 通信 / その他）を選択できる。
   - 当日入力を最短3タップ程度で完了できるUIを目指す。
   - 残高は「前月繰越残高 + 当月収入合計 - 当月支出合計」で自動算出して表示する。
2. 予算管理
   - ユーザーは予算期間の締め日（例: 毎月25日）を設定できる。
   - ユーザーは期間ごとの総額予算とカテゴリ別予算を設定できる。
   - 予算超過が見込まれるカテゴリを可視化する。
3. 月次レポート
   - 月単位で総支出、カテゴリ別割合、前月差分を表示する。
   - 改善アクション候補（例: 食費の外食比率を下げる）を提示する。
4. 買い物リスト自動生成
   - ユーザーが今週の買い物を開始すると、候補リストを提案する。
   - 提案は「定期購入品」「在庫切れ推定品」「予算内候補」で構成する。
   - 在庫切れ推定は購入履歴（購入頻度・最終購入日・平均消費間隔）を入力に、AI推定モデルで行う。
   - ユーザーが提案を編集して最終リストを確定できる。

## 非機能要件（MVP）
- 利用性: 手入力またはレシートOCRを使い、支出入力は1分以内に完了できることを目標とする。
- 性能: 1か月分データの月次レポート表示を2秒以内で完了する。
- 信頼性: 入力済みデータはアプリ再起動後も保持される。
- セキュリティ: 個人の家計データは最低限ローカル保存時に保護方針を明示する。

## 画面一覧（MVP）
1. ホーム（今月予算残高・主要カテゴリ進捗）
2. 支出入力画面
3. 買い物リスト提案画面
4. 月次レポート画面
5. 設定（予算・カテゴリ設定）

## 主要ユーザーストーリー
- US-01: 節約重視ユーザーとして、支出を素早く記録したい。なぜなら記録の手間が大きいと継続できないから。
- US-01b: 節約重視ユーザーとして、収入も登録して残高を把握したい。なぜなら使える金額を正しく判断したいから。
- US-02: 節約重視ユーザーとして、予算内に収まる買い物リストを作りたい。なぜなら無駄買いを防ぎたいから。
- US-03: 節約重視ユーザーとして、月末に支出傾向を振り返りたい。なぜなら翌月の改善に繋げたいから。

## 受け入れ条件（Acceptance Criteria）
- [ ] 支出入力（手入力またはレシートOCR）が1件以上登録でき、月次集計に反映される。
- [ ] 収入・支出を登録すると、残高が自動計算される。
- [ ] 締め日とカテゴリ別予算を設定すると、予算比（使用率）が確認できる。
- [ ] 買い物リスト提案が生成され、ユーザーが編集して保存できる。
- [ ] 月次レポートでカテゴリ別内訳と前月比が確認できる。

## リスク / 前提
- 前提: 在庫切れ推定AIは購入履歴データ量が少ない初期期間は推定精度が低下しやすい。
- リスク: AI推定結果の説明可能性が不足すると、提案への信頼が下がる。
- 対応: 推定根拠（最終購入日・推定消費日数）を提案項目ごとに表示し、手動編集を必須で残す。

## 確定事項（今回の対話）
1. 対応プラットフォームはWebを先行し、その後にAndroid / iOSへ展開する。
2. 支出入力の優先方式はレシートOCRを採用する（手入力は補完手段として残す）。

## 次の対話で確定したい項目
1. 買い物リストAI推定の表示方針（推定理由の粒度、ユーザーへの説明文）
2. 月次レポートで必須の指標（例: 固定費比率、外食比率、収支差額）
